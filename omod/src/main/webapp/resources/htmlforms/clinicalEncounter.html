<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
-->
<htmlform>

	<style type="text/css">
		table.right-aligned-first td:first-child {
			text-align: right;
		}
	</style>
	<script type="text/javascript" src="../moduleResources/kenyaemr/scripts/moment.js"></script>
	<script type="text/javascript">
		var LATEST_TEMPERATURE = "<lookup expression="fn.latestObs(5088).valueNumeric()"/>";
		var complaintAndDurationMap = new Map();

		function onWeightOrHeightChange() {
			var display = '';
			var weightKg = parseFloat(getValue('weight.value'));
			var heightM = parseFloat(getValue('height.value')) / 100;
			if (!isNaN(weightKg) &amp;&amp; !isNaN(heightM))  {
				var bmi = weightKg / (heightM * heightM);
				if (isNaN(bmi) || bmi &lt; 10 || bmi &gt; 50) {
					display = 'Abnormal value. Were height and height entered correctly?';
				}
				else {
					display = bmi.toFixed(2);
				}
			}
			jq('#calculated-bmi').html(display);
		}
		function displayRecentBmi(){
			var weightKg = "<lookup expression="fn.latestObs(5089).valueNumeric"/>"
			var heightM = ("<lookup expression="fn.latestObs(5090).valueNumeric"/>")/100
			var bmi ='';
			if (!isNaN(weightKg) &amp;&amp; !isNaN(heightM))  {
				bmi = weightKg / (heightM * heightM);
			}
			jq('#recent-calculated-bmi').html(bmi.toFixed(2));
		}

		jq(function() {
			getField('weight.value').change(onWeightOrHeightChange);
			getField('height.value').change(onWeightOrHeightChange);
			onWeightOrHeightChange();
			displayRecentBmi();
			//Complaints
			jq("#tbl-complaints-today").hide();
			jq("#alert-box").hide();
			jq('input[type=radio].complaints-today').prop("checked", false);
			jq("#complaints-today").change(complaintSelected);       //boolean
			jq(".complaint-time input").change(complaintDurationInput);
			jq("#complaint-field select").change(complaintSpecified);
			jq('#tbl-other-complaint').hide();

			var strtext = "";
			var familyPlanningOption = getValue('fplanning.value');
			var pregnancyOption = getValue('pregnancyOption.value');
			if (pregnancyOption == 1066) {
				jq('#pregnancyOptionValues :input').prop('disabled', true);
			}
			if (familyPlanningOption == "") {
				jq('#onFp :input').prop('disabled', true);
				jq('#notOnFp :input').prop('disabled', true);
			}
			if (familyPlanningOption == "965") {
				jq('#onFp :input').prop('disabled', false);
				jq('#notOnFp :input').prop('disabled', true);
			}
			if (familyPlanningOption == "160652") {
				jq('#onFp :input').prop('disabled', true);
				jq('#notOnFp :input').prop('disabled', false);
			}
			if (familyPlanningOption == "1360") {
				jq('#onFp :input').prop('disabled', false);
				jq('#notOnFp :input').prop('disabled', true);
			}
			jq('#pregnancyOption input:radio').click(function() {
				if ((getValue('pregnancyOption.value')) == 1066){
					jq('#pregnancyOptionValues :input').prop('disabled', true);
				}
				else {
					jq('#pregnancyOptionValues :input').prop('disabled', false);
				}
			});

			jq("#fplanning select ").change(function() {

				jq("#fplanning select option:selected").each(function () {
					strtext += $(this).val();
				});

				if (strtext == ""){
					$('#notOnFp :input').prop('checked', false);
					$('#onFp :input').prop('checked', false);
					$('#onFp :input').prop('disabled', true);
					$('#notOnFp :input').prop('disabled', true);
				}
				if (strtext == "965") {
					$('#notOnFp :input').prop('checked', false);
					$('#onFp :input').prop('disabled', false);
					$('#notOnFp :input').prop('disabled', true);
				}
				if (strtext == "160652") {
					$('#onFp :input').prop('checked', false);
					$('#onFp :input').prop('disabled', true);
					$('#notOnFp :input').prop('disabled', false);
				}
				if (strtext == "1360") {
					$('#notOnFp :input').prop('checked', false);
					$('#onFp :input').prop('disabled', false);
					$('#notOnFp :input').prop('disabled', true);
				}

				strtext = "";
			});

			var pbirthdate = new Date("<lookup expression="patient.birthdate" />").getTime();
			var pgender    = "<lookup expression="patient.gender" />";

			if (pgender == 'F' ){
				beforeSubmit.push(function() {
					var lmpdate = new Date(getValue('lmp-date.value')).getTime();
					if (lmpdate &lt; pbirthdate) {
						getField('lmp-date.error').html('Should not be earlier than birth date').show();
						return false;
					}
					return true;
				});
			}
		});
		var complaintSelected = function() {
			var val = getValue('complaints-today.value');
			var complaint = jq('.complaint select').val('');
			var complaintDuration = jq('.complaint-time input').val('');
			var complaintDate = jq('.complaint-date input').val('');
			if (val == "false" || val == 1066){
				jq("#tbl-complaints-today").hide();
				clearHiddenSections([complaint, complaintDuration, complaintDate]);
				getField('complaint-field.error').html('Please specify the complaints.').hide();
			}else {
				jq("#tbl-complaints-today").show();
				jq("#alert-box").show();
			}
		}

		//IDSR 
		var complaintSpecified = function () {
			var selectedComplaint = getField('complaint-field.value').val();
			if (selectedComplaint == 5622){
				jq('#tbl-other-complaint').show();
			}else{
				jq('#tbl-other-complaint').hide();
			}
		}
		var complaintDurationInput = function() {
				var val = jq(this).closest('tr').find(".complaint-time input").val();
				var encounterDate = new Date(getValue('encounter-date.value'));
				var formattedComplaintDate = moment(moment(encounterDate, 'YYYY-MM-DD').subtract(val, 'days').toDate()).format('YYYY-MM-DD');
				if(val >0 ) {
					jq(this).closest('tr').find(".complaint-date input").val(formattedComplaintDate);
					var complaint = jq(this).closest('tr').find(".complaint select").val();
					complaintAndDurationMap[complaint] =  val;
					jq("#alert-box").text(updateAlerts(complaintAndDurationMap));
				}
		}	

		updateAlerts = function (complaintMap) {
			var DIARRHEA = 142412;
			var hasDiarrhea = false;
			var VOMITING = 122983;
			var hasVomiting = false;
			var COUGH = 143264;
			var hasCough = false;
			var FEVER = 140238;
			var hasFever = false;
			var WEAK_LIMBS = 157498;
			var hasWeakLimbs = false;
			var UNEXPLAINED_BLEEDING = 162628;
			var hasUnexplainedBleeding = false;
			var JOINT_PAINS = 116558;
			var hasJointPains = false;
			var BLOOD_IN_STOOL = 117671;
			var hasBloodInStool = false;
			var alertList = [];
			var currentTemp = parseFloat(getValue("currentTemperature.value"));
			var pAge = parseInt('<lookup expression="patient.age"/>');


			Object.keys(complaintAndDurationMap).forEach(function(key,index){ // we have to do this because map.has() doesn't work
				if (key == DIARRHEA) {
					hasDiarrhea = true;
				}
				if (key == VOMITING) {
					hasVomiting = true;
				}
				if (key == COUGH) {
					hasCough = true;
				}
				if (key == FEVER) {
					hasFever = true;
				}hasDiarrhea
				if (key == WEAK_LIMBS) {
					hasWeakLimbs = true;
				}
				if (key == UNEXPLAINED_BLEEDING) {
					hasUnexplainedBleeding = true;
				}
				if (key == JOINT_PAINS) {
					hasJointPains = true;
				}
				if (key == BLOOD_IN_STOOL) {
					hasBloodInStool = true;
				}
			})
			if (hasDiarrhea &amp;&amp; hasVomiting) {
				alertList.push("Suspected cholera")
			}

			if (hasDiarrhea &amp;&amp; hasBloodInStool) {
				alertList.push("Suspected Dysentery");
			}

			if (hasFever &amp;&amp; hasUnexplainedBleeding) {
				alertList.push("Suspected Viral haemorrhagic Fever");
			}

			if (hasFever &amp;&amp; hasJointPains &amp;&amp; (!isNaN(currentTemp) &amp;&amp; currentTemp &gt; 38.5)) {
				alertList.push("Suspected Chikungunya");
			}

			if (pAge &lt;15 &amp;&amp; hasWeakLimbs) {
				alertList.push("Suspected Polio");
			}
			if (hasFever &amp;&amp; hasCough &amp;&amp; currentTemp &gt; 38) {
				alertList.push("Suspected ILI");
			}

			return alertList.join("\n");

		}
		clearHiddenSections = function(parentObj) {
			for(var i=0; i &lt; parentObj.length; i++){
				parentObj[i].find('input[type=radio]').each(function() {
					this.checked = false;
				});
				parentObj[i].find('input[type=checkbox]').each(function() {
					this.checked = false;
				});
				parentObj[i].find('input[type=text]').each(function() {
					this.val("");
				});
				parentObj[i].find('select').each(function() {
					this.selectedIndex =0;
				});

			}
		}
	</script>
	<ifMode mode="EDIT">
		<script type="text/javascript">
			jq(function(){			
				var complaintsToday = getValue('complaints-today.value');
				var selectedComplaint = getField('complaint-field.value').val();		

//If any checked  complaints allergies chronic illness and adverse events
				if (complaintsToday == 'true'){
					jq("#tbl-complaints-today").show();
					jq("#alert-box").show();

				}else{
					jq("#tbl-complaints-today").hide();
					jq("#alert-box").hide();
				}
				if (selectedComplaint == 5622){
					jq("#tbl-other-complaint").show();
				}else{
					jq("#tbl-other-complaint").hide();				}
			

			});
		</script>
	</ifMode>
	<div class="ke-form-header">
		<table width="100%">
			<tr>
				<td>Date: <encounterDate id="encounter-date" showTime="true" /></td>
				<td>Location: <encounterLocation default="GlobalProperty:kenyaemr.defaultLocation" type="autocomplete" /></td>
			</tr>
		</table>
	</div>

	<div class="ke-form-content">
		<!-- These initial sections are duplicated from triage.xml, so try to keep them in sync -->

		<fieldset>
			<legend>Reason</legend>

			<table cellspacing="5">
				<tr>
					<th></th>
					<th></th>
					<th>Recent</th>
				</tr>
				<tr>
					<td>Reason for visit</td>
					<td><obs conceptId="160430AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rows="2" cols="80"/></td>
					<td>
						<span class="value"><recentObs conceptId="160430AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></span>
					</td>
				</tr>
			</table>
		</fieldset>

		<fieldset>
			<legend>Vital Signs</legend>

			<table cellspacing="5">
				<tr>
					<th></th>
					<th>Current</th>
					<th>Recent</th>
				</tr>
				<tr>
					<td>Temp</td>
					<td><obs conceptId="5088AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="currentTemperature" /> &#176;C</td>
					<td>
						<span class="value"><recentObs conceptId="5088AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></span>
					</td>
				</tr>
				<tr>
					<td>Pulse Rate</td>
					<td><obs conceptId="5087AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
					<td><span class="value"><recentObs conceptId="5087AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></span></td>
				</tr>
				<tr>
					<td>BP</td>
					<td><obs  conceptId="5085AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/> / <obs conceptId="5086AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>mmHg</td>
					<td><span class="value"><recentObs conceptId="5085AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/> / <recentObs conceptId="5086AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span></td>
				</tr>
				<tr>
					<td>Respiratory Rate</td>
					<td><obs conceptId="5242AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
					<td><span class="value"><recentObs conceptId="5242AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span></td>
				</tr>
				<tr>
					<td>Oxygen Saturation</td>
					<td><obs conceptId="5092AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
					<td><span class="value"><recentObs conceptId="5092AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span></td>
				</tr>
			</table>
		</fieldset>
		<!-- Complaints History  -->
		<fieldset class="patient-details">
			<legend>Complaints and History of complaints</legend>
			<div>
				Patient having complaint(s) today?
				<obs id="complaints-today" conceptId="1154AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="yes_no"/>
				<span style="color:red;"><strong>*</strong></span>
			</div>
			<table>
				<tr>
					<td>
						<table cellspacing="5" id="tbl-complaints-today">
							<tr>
								<th style="color: #888">Complaint</th>
								<th style="color: #888; text-align: center">Duration (Days)</th>
								<th style="color: #888; text-align: center">Onset Date</th>
							</tr>
							<repeat>
								<template>
									<obsgroup groupingConceptId="160531AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
										<tr>
											<td>
												<obs class="complaint" conceptId="5219AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerConceptIds="151AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,141631AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,121543AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,119537AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,148035AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,840AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,131021AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,120749AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,871AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,120345AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,119574AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,113054AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,206AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,143264AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,143129AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,142412AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,122496AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,118789AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,141830AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
                                                            141585AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,141128AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,131040AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,114399AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162626AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,140238AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,140070AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,123396AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,142247AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,135462AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,139084AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,117698AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,116214AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,112989AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,879AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,116558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,114395AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,135595AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,135488AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
                                                             121657AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,144576AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,116334AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,131015AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,111721AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,133028AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,133632AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5978AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,133469AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,133027AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,132653AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,125225AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,131034AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5953AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,512AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,127777AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,113224AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,131032AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,126535AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
                                                               141597AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,158843AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,140941AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,125198AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,112200AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160208AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,111525AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,122983AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,832AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabels="Abdominal pain,Abnormal Uterine Bleeding,Anxiety,Depression,Back pain,Bloody Urine,Breast Pain,Chest Pain,Cold and Chills,Confusion,Delirium,Convulsions,Seizure,Cough,Crying Infant,Diarrhea,Difficult in breathing,Difficulty in swallowing,Dizziness,Ear Pain,Epigastric Pain,Eye apin,Facial Pain,Fatigue/weakness,Fever,Flank Pain,Vaginal Discharge,Discharge from Penis,Genital Ulcer,Headache,Hearing Loss,Hypotension,Shock,Itchiness/Pruritus,Joint Pain,Leg Pain,Loss of Appetite,Lymphadenopathy,Memory Loss,Coma,Lethargy,Mouth Pain,Mouth Ulceration,Muscle cramps,Muscle Pain,Nausea,Neck Pain,Night sweats,Numbness,Pain when Swallowing,Pelvic Pain,Poor Vision,Rash,Red Eye,Running/Blocked nose,Scrotal Pain,Shoulder Pain,
                                                       Sleep Disturbance,Sore Throat,Excessive Sweating,Swollen Legs,Tremors,Urinary Symptoms,Vertigo,Vomiting,Weight Loss,Other"
													 style="dropdown" id="complaint-field"
												/>
											</td>
											<td><obs class="complaint-time" conceptId="159368AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id ="complaint-duration" size="10" /></td>
											<td>
												<obs class="complaint-date" conceptId="159948AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" allowFutureDates="false"/>
											</td>
										</tr>
									</obsgroup>
								</template>
								<render n="1" concept="complaint"/>
								<render n="2" concept="complaint"/>
								<render n="3" concept="complaint"/>
								<render n="4" concept="complaint"/>
								<render n="5" concept="complaint"/>
							</repeat>
						</table>
					</td>
					<td>
						<textarea id="alert-box" style="color: darkred;border-color: #5A5655;font-size: large;" readonly="true" rows="5" cols="60">

						</textarea>
					</td>
				</tr>
			</table>


			<table id="tbl-other-complaint">
				<tr>
					<th  style="color: #888" >Specify other complaints</th>
				</tr>
				<tr>
					<td>
						<obs conceptId="165250" rows="3" cols="80" id="obs-other-complaint"/>
					</td>
				</tr>
			</table>
			<table>
				<tr>
					<th  style="color: #888" >Clinical Notes</th>
					<th  style="color: #888" >Previous visit's notes</th>
				</tr>
				<tr>

					<td>
						<obs conceptId="160430AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rows="3" cols="80" id="clinical-notes"/>
					</td>
					<td>
						<span class="value"><recentObs conceptId="160430AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span>
					</td>
				</tr>
			</table>
		</fieldset>
		
		<fieldset>
			<legend>Other Recordings</legend>

			<table cellspacing="10">
				<tr>
					<th> </th>
					<th>Current</th>
					<th>Recent</th>
				</tr>
				<tr>
					<td>Weight</td>
					<td><obs id="weight" conceptId="5089AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" />kg</td>
					<td><span class="value"><recentObs conceptId="5089AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></span></td>
				</tr>
				<tr>
					<td>Height</td>
					<td><obs id="height" conceptId="5090AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" />cm</td>
					<td><span class="value"><recentObs conceptId="5090AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></span></td>
				</tr>
				<tr>
					<td>BMI</td>
					<td><span id="calculated-bmi" class="value"></span></td>
					<td><span id="recent-calculated-bmi" class="value"></span></td>
				</tr>
				<tr>
					<td>MUAC</td>
					<td><obs conceptId="1343AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
					<td><span class="value"><recentObs conceptId="1343AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></span></td>
				</tr>
				<includeIf velocityTest="$patient.gender == 'F' ">
					<tr>
						<td>LMP</td>
						<td><obs id="lmp-date" conceptId="1427AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
						<td><span class="value"><recentObs conceptId="1427AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></span></td>
					</tr>
				</includeIf>
			</table>
		</fieldset>

		<includeIf velocityTest="$patient.gender == 'F' ">
			<fieldset>
				<legend>Pregnancy Details</legend>
				<table class="right-aligned-first" style="width: 100%;" border="0">
					<tr>
						<td colspan="2" style="text-align: left"><obs conceptId="5272AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
																	  labelText="Is Patient Pregnant?: " answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
																	  style="radio" answerLabels="Yes,NO" id="pregnancyOption"/></td>
						<td></td>
					</tr>
				</table>
				<table id="pregnancyOptionValues">
					<tr>
						<td width="8%" style="text-align: left">ANC Number:</td>
						<td><obs conceptId="1425AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " /></td>
						<td></td>
					</tr>
					<tr>
						<td style="text-align: left">EDD:</td>
						<td colspan="2"><obs conceptId="5596AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" showTime="false" allowFutureDates="true" labelText=" " /></td>
					</tr>
					<tr>
						<td style="text-align: left">Gravida:</td>
						<td><obs conceptId="5624AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " /></td>
						<td></td>
					</tr>
					<tr>
						<td style="text-align: left">Parity:</td>
						<td><obs conceptId="1053AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " /></td>
						<td></td>
					</tr>
				</table>
			</fieldset>
		</includeIf>

		<fieldset>
			<legend>Family Planning Status</legend>
			<table>
				<tr>
					<td colspan="2">
						Family Planning Status :
						<obs conceptId="160653AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"   id="fplanning"  answerConceptIds="965AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160652AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1360AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="dropdown" answerLabels="On Family Planning,Not using Family Planning,Wants Family Planning"  /> <hr/><br/>
					</td>
				</tr>
				<tr>
					<td colspan="2">
						<div id="onFp">
							If currently using Family Planning, or wants Family Planning, specify which method(s)<hr/>
							<includeIf velocityTest="$patient.gender == 'F' ">
								<table class="right-aligned-first" style="width: 100%;" border="0">
									<obsgroup groupingConceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
										<tr>
											<td width="10%"></td>

											<td style="text-align: left">
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="160570AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabel="Emergency contraceptive pills" style="checkbox" /><br/>
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="780AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabel="Oral Contraceptives Pills" style="checkbox" /><br/>
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="5279AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabel="Injectible" style="checkbox" /><br/>
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerConceptId="1359AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Implant" style="checkbox" /><br/>
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="5275AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabel="Intrauterine Device" style="checkbox" /><br/>
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="136163AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabel="Lactational Amenorhea Method" style="checkbox" /><br/>
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="5278AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabel="Diaphram/Cervical Cap" style="checkbox" /><br/>
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerConceptId="5277AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabel="Fertility Awareness"
													 style="checkbox" /><br/>
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerConceptId="1472AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabel="Tubal Ligation" style="checkbox" /><br/>
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerConceptId="190AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabel="Condoms" style="checkbox" /><br />
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerConceptId="1489AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabel="Vasectomy(Partner)" style="checkbox" /><br />
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerConceptId="162332AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabel="Undecided" style="checkbox" /></td>
										</tr>
									</obsgroup>
								</table>
							</includeIf>

							<includeIf velocityTest="$patient.gender == 'M' ">
								<table class="right-aligned-first" style="width: 100%;" border="0">
									<obsgroup groupingConceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
										<tr>
											<td width="10%"></td>

											<td style="text-align: left">
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerConceptId="190AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Condoms" style="checkbox" /><br/>
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="1489AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabel="Vasectomy" style="checkbox" /><br />
												<obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="162332AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabel="Undecided" style="checkbox" />
											</td>

										</tr>
									</obsgroup>
								</table>
							</includeIf>
						</div>
					</td>
				</tr>
				<tr>
					<td colspan="2">
						<div id="notOnFp">
							<br/>Not using Family Planning? Specify reason(s)<hr/>
							<includeIf velocityTest="$patient.gender == 'F' ">
								<table style="width: 100%" border="0">
									<obsgroup groupingConceptId="160575AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
										<tr>
											<td width="10%"></td>
											<td>
												<obs conceptId="160575AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerConceptId="160571AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Wants to get Pregnant"
													 style="checkbox" /><br/>
												<obs conceptId="160575AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerConceptId="160572AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Thinks can't get pregnant"
													 style="checkbox" /><br/>
												<obs conceptId="160575AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerConceptId="160573AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Not sexually active now"
													 style="checkbox" /><br/>
											</td>
										</tr>
									</obsgroup>
								</table>
							</includeIf>
							<includeIf velocityTest="$patient.gender == 'M' ">
								<table style="width: 100%" border="0">
									<obsgroup groupingConceptId="160575AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
										<tr>
											<td width="10%"></td>
											<td>
												<obs conceptId="160575AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerConceptId="160573AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Not sexually active now"
													 style="checkbox" />
											</td>
										</tr>
									</obsgroup>
								</table>
							</includeIf>
						</div>
					</td>
				</tr>
			</table>
		</fieldset>
	</div>

	<div class="ke-form-footer">
		<submit />
	</div>

</htmlform>
